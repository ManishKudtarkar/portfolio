{% extends "base.html" %}

{% block title %}Projects | Manish Kudtarkar - Portfolio{% endblock %}
{% block description %}Explore Manish Kudtarkar's portfolio of web development, data analysis, and automation projects. See how he solves real-world problems with Python, Flask, and modern technologies.{% endblock %}

{% block content %}
<section class="section projects-hero">
    <div class="container">
        <div class="section-header">
            <h1 class="section-title">My Projects</h1>
            <p class="section-subtitle">
                A comprehensive showcase of my work in <strong>web development</strong>, <strong>data analysis</strong>, 
                <strong>machine learning</strong>, and <strong>automation</strong>. Each project represents a unique 
                challenge and learning opportunity.
            </p>
        </div>
        
        <div class="projects-stats">
            <div class="stat-item">
                <span class="stat-number">{{ projects|length }}</span>
                <span class="stat-label">Total Projects</span>
            </div>
            <div class="stat-item">
                <span class="stat-number">{{ completed_projects|length }}</span>
                <span class="stat-label">Completed</span>
            </div>
            <div class="stat-item">
                <span class="stat-number">{{ in_progress_projects|length }}</span>
                <span class="stat-label">In Progress</span>
            </div>
        </div>
    </div>
</section>

<!-- Filter Tabs -->
<section class="section projects-filter">
    <div class="container">
        <div class="filter-tabs">
            <button class="filter-tab active" data-filter="all">All Projects</button>
            <button class="filter-tab" data-filter="completed">Completed</button>
            <button class="filter-tab" data-filter="in-progress">In Progress</button>
            <button class="filter-tab" data-filter="featured">Featured</button>
        </div>
    </div>
</section>

<!-- Projects Grid -->
<section class="section projects-showcase">
    <div class="container">
        <div class="projects-grid" id="projectsGrid">
            {% for project in projects %}
            <article class="project-card" 
                     data-status="{{ project.status|lower|replace(' ', '-') }}" 
                     data-featured="{{ 'true' if project.get('featured') else 'false' }}"
                     data-year="{{ project.year }}">
                <div class="project-header">
                    <div class="project-meta">
                        <span class="project-year">{{ project.year }}</span>
                        <span class="project-status status-{{ project.status|lower|replace(' ', '-') }}">
                            {{ project.status }}
                        </span>
                        {% if project.get('featured') %}
                        <span class="featured-badge">‚≠ê Featured</span>
                        {% endif %}
                    </div>
                </div>
                
                <div class="project-image">
                    <img src="{{ url_for('static', filename=project.image) }}" alt="{{ project.title }}" onerror="this.onerror=null; this.parentElement.innerHTML='<div class=\'project-placeholder\'><span>üñºÔ∏è</span></div>'">
                </div>

                <div class="project-content">
                    <h3 class="project-title">{{ project.title }}</h3>
                    <div class="project-overlay">
                        <div class="project-links">
                            {% if project.link and project.link != "#" %}
                                <a href="{{ project.link }}" class="project-link" target="_blank" rel="noopener" title="View Project">
                                    <span>üîó</span>
                                </a>
                            {% endif %}
                            <button class="project-link" onclick="openProjectModal('{{ loop.index0 }}')" title="View Details">
                                <span>üìñ</span>
                            </button>
                        </div>
                    </div>
                </div>
                
                <div class="project-content">
                    <h3>{{ project.title }}</h3>
                    <p>{{ project.description }}</p>
                    
                    <div class="project-tech">
                        {% for tech in project.tech %}
                            <span class="tech-badge">{{ tech }}</span>
                        {% endfor %}
                    </div>
                    
                    <div class="project-footer">
                        {% if project.link and project.link != "#" %}
                            <a href="{{ project.link }}" class="project-cta" target="_blank" rel="noopener">
                                View Project <span class="arrow">‚Üí</span>
                            </a>
                        {% else %}
                            <span class="project-cta disabled">
                                Coming Soon <span class="arrow">‚è≥</span>
                            </span>
                        {% endif %}
                    </div>
                </div>
            </article>
            {% endfor %}
        </div>
        
        <div class="no-projects" id="noProjects" style="display: none;">
            <div class="no-projects-content">
                <span class="no-projects-icon">üîç</span>
                <h3>No projects found</h3>
                <p>Try selecting a different filter to see more projects.</p>
            </div>
        </div>
    </div>
</section>

<!-- Technologies Section -->
<section class="section tech-section">
    <div class="container">
        <div class="section-header">
            <h2 class="section-title">Technologies I Use</h2>
            <p class="section-subtitle">
                A comprehensive overview of the tools and technologies I work with
            </p>
        </div>
        
        <div class="tech-categories">
            {% for category, tech_list in skills.items() %}
            <div class="tech-category-card">
                <h3>{{ category }}</h3>
                <div class="tech-list">
                    {% for tech in tech_list %}
                    <span class="tech-item">{{ tech }}</span>
                    {% endfor %}
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
</section>

<!-- Call to Action -->
<section class="section cta-section">
    <div class="container">
        <div class="cta-content">
            <h2>Interested in Working Together?</h2>
            <p>I'm open to discussing full-time roles, internships, freelance projects, or technical collaborations.</p>
            <div class="cta-actions">
                <a href="{{ url_for('contact') }}" class="btn primary large">
                    <span class="btn-icon">üí¨</span>
                    <span>Let's Talk</span>
                </a>
                <a href="https://github.com/ManishKudtarkar" class="btn secondary large" target="_blank" rel="noopener">
                    <span class="btn-icon">üì±</span>
                    <span>View GitHub</span>
                </a>
            </div>
        </div>
    </div>
</section>

<!-- Project Modal (for detailed view) -->
<div class="modal" id="projectModal">
    <div class="modal-content">
        <div class="modal-header">
            <h2 id="modalTitle"></h2>
            <button class="modal-close" onclick="closeProjectModal()">&times;</button>
        </div>
        <div class="modal-body">
            <div id="modalContent"></div>
        </div>
    </div>
</div>

<script>
// Project filtering functionality
document.addEventListener('DOMContentLoaded', function() {
    const filterTabs = document.querySelectorAll('.filter-tab');
    const projectCards = document.querySelectorAll('.project-card');
    const noProjects = document.getElementById('noProjects');
    
    filterTabs.forEach(tab => {
        tab.addEventListener('click', () => {
            // Update active tab
            filterTabs.forEach(t => t.classList.remove('active'));
            tab.classList.add('active');
            
            const filter = tab.getAttribute('data-filter');
            let visibleCount = 0;
            
            projectCards.forEach(card => {
                let shouldShow = false;
                
                if (filter === 'all') {
                    shouldShow = true;
                } else if (filter === 'completed') {
                    shouldShow = card.getAttribute('data-status') === 'completed';
                } else if (filter === 'in-progress') {
                    shouldShow = card.getAttribute('data-status') === 'in-progress';
                } else if (filter === 'featured') {
                    shouldShow = card.getAttribute('data-featured') === 'true';
                }
                
                if (shouldShow) {
                    card.style.display = 'block';
                    visibleCount++;
                } else {
                    card.style.display = 'none';
                }
            });
            
            // Show/hide no projects message
            noProjects.style.display = visibleCount === 0 ? 'block' : 'none';
        });
    });
});

// Project modal functionality
const projectData = {{ projects | tojson }};

function openProjectModal(index) {
    const project = projectData[index];
    const modal = document.getElementById('projectModal');
    const modalTitle = document.getElementById('modalTitle');
    const modalContent = document.getElementById('modalContent');
    
    modalTitle.textContent = project.title;
    modalContent.innerHTML = `
        <div class="modal-project-details">
            <p><strong>Status:</strong> ${project.status}</p>
            <p><strong>Year:</strong> ${project.year}</p>
            <p><strong>Description:</strong> ${project.description}</p>
            <div class="modal-tech">
                <strong>Technologies:</strong>
                ${project.tech.map(tech => `<span class="tech-badge">${tech}</span>`).join('')}
            </div>
            ${project.link && project.link !== '#' ? 
                `<a href="${project.link}" class="btn primary" target="_blank" rel="noopener">View Project</a>` : 
                '<span class="btn disabled">Coming Soon</span>'
            }
        </div>
    `;
    
    modal.style.display = 'flex';
    document.body.style.overflow = 'hidden';
}

function closeProjectModal() {
    const modal = document.getElementById('projectModal');
    modal.style.display = 'none';
    document.body.style.overflow = 'auto';
}

// Close modal when clicking outside
document.getElementById('projectModal').addEventListener('click', function(e) {
    if (e.target === this) {
        closeProjectModal();
    }
});
</script>
{% endblock %}
